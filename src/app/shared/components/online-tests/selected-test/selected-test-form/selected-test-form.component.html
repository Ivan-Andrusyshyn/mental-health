<form
  class="test-form"
  [formGroup]="testForm"
  (submit)="onCalculateScore()"
  *ngIf="currentQuestionIndex !== selectedTest.questions.length; else summary"
>
  <div
    *ngFor="let question of selectedTest.questions; let i = index"
    class="question-container"
    [hidden]="i !== currentQuestionIndex"
  >
    <label class="question-text">{{ i + 1 }}. {{ question }}</label>
    <div class="test-question-number">
      Запитання {{ i + 1 }} з {{ selectedTest.questions.length }}
    </div>
    <div class="options-container" [formGroupName]="'questions'">
      <div [formGroupName]="i">
        <label class="option-label" *ngFor="let option of options; index as i">
          <div class="radio-wrap">
            <input
              class="radio-button"
              type="radio"
              formControlName="selectedOption"
              [attr.name]="'question' + i"
              [value]="option.value"
            />
            <span>
              {{ option.label }}
            </span>
          </div>
        </label>
      </div>
    </div>
  </div>

  <app-form-buttons
    (onNextQuestion)="onNextQuestion()"
    (onPreviousQuestion)="onPreviousQuestion()"
    [disabledButton]="disabledButton"
    [selectedTest]="selectedTest"
    [currentQuestionIndex]="currentQuestionIndex"
  ></app-form-buttons>
</form>

<ng-template #summary>
  <app-selected-test-result
    [testId]="selectedTest.id"
    [score]="score"
  ></app-selected-test-result>
</ng-template>
